<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${property.id} != null ? 'Edito Pronën' : 'Shto Pronë'"></title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h1 th:text="${property.id} != null ? 'Edito Pronën' : 'Shto Pronë'"></h1>
    <form th:action="@{/properties}" th:object="${property}" method="post" enctype="multipart/form-data">
        <input type="hidden" th:field="*{id}"/>

        <!-- Title -->
        <div class="mb-3">
            <label class="form-label">Title</label>
            <input type="text" class="form-control" th:field="*{title}" required/>
        </div>

        <!-- Address -->
        <div class="mb-3">
            <label class="form-label">Address</label>
            <input type="text" class="form-control" th:field="*{address}" required/>
        </div>

        <!-- City -->
        <div class="mb-3">
            <label class="form-label">City</label>
            <input type="text" class="form-control" th:field="*{city}" required/>
        </div>

        <!-- Price -->
        <div class="mb-3">
            <label class="form-label">Price</label>
            <input type="number" class="form-control" th:field="*{price}" required/>
        </div>

        <!-- Rooms -->
        <div class="mb-3">
            <label class="form-label">Rooms</label>
            <input type="text" class="form-control" th:field="*{rooms}" placeholder="p.sh. 3+1" required/>
        </div>

        <!-- Area -->
        <div class="mb-3">
            <label class="form-label">Area (m²)</label>
            <input type="number" class="form-control" th:field="*{area}" required/>
        </div>

        <!-- Description -->
        <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea class="form-control" th:field="*{description}" rows="5"
                      style="white-space: pre-wrap; overflow-y: auto; resize: vertical;"
                      placeholder="Shkruaj përshkrimin e pronës këtu..."></textarea>
        </div>


        <!-- Location -->
        <div class="mb-3">
            <label class="form-label">Location</label>
            <input type="text" class="form-control" th:field="*{location}"/>
        </div>

        <!-- Status: Shitje / Qira -->
        <div class="mb-3">
            <label class="form-label">Tipi i Pronës</label><br/>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" th:field="*{status}" value="Shitje" th:checked="${property.status == 'Shitje'}" id="saleRadio" required>
                <label class="form-check-label" for="saleRadio">Shitje</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" th:field="*{status}" value="Qira" th:checked="${property.status == 'Qira'}" id="rentRadio">
                <label class="form-check-label" for="rentRadio">Qira</label>
            </div>
        </div>

        <!-- Kategoria -->
        <div class="mb-3">
            <label class="form-label">Kategoria</label>
            <select class="form-select" th:field="*{category}" required>
                <option value="" disabled th:selected="${property.category == null}">-- Zgjidh Kategorinë --</option>
                <option value="Tokë Bujqësore" th:selected="${property.category == 'Tokë Bujqësore'}">Tokë Bujqësore</option>
                <option value="Pemishte" th:selected="${property.category == 'Pemishte'}">Pemishte</option>
                <option value="Truall" th:selected="${property.category == 'Truall'}">Truall</option>
                <option value="Vilë" th:selected="${property.category == 'Vilë'}">Vilë</option>
                <option value="Shtëpi" th:selected="${property.category == 'Shtëpi'}">Shtëpi</option>
                <option value="Kapanon" th:selected="${property.category == 'Kapanon'}">Kapanon</option>
                <option value="Magazinë" th:selected="${property.category == 'Magazinë'}">Magazinë</option>
                <option value="Lokale" th:selected="${property.category == 'Lokale'}">Lokale</option>
                <option value="Garazh" th:selected="${property.category == 'Garazh'}">Garazh</option>
            </select>
        </div>

        <!-- Foto upload -->
        <div class="mb-3">
            <label class="form-label">Foto (mund të zgjidhni më shumë se një)</label>
            <input type="file" class="form-control" name="imageFiles" multiple/>
        </div>

        <button type="submit" class="btn btn-success">Ruaj</button>
        <a class="btn btn-secondary" th:href="@{/properties}">Kthehu</a>
    </form>

    <!-- Shfaq foto ekzistuese në edit -->
    <div th:if="${property.imageFileNames != null}">
        <h4 class="mt-4">Foto ekzistuese:</h4>
        <div class="row">
            <div class="col-md-3 mb-2" th:each="img : ${property.imageFileNames}">
                <img th:src="@{'/uploads/images/' + ${img}}" class="img-fluid img-thumbnail"/>
            </div>
        </div>
    </div>
</div>
</body>
</html>
